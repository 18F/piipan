#/components/requestBodies/MatchQueryRequest
MatchQueryRequest:
  required: true
  content:
    application/json:
      schema:
        type: object
        required:
            - query
        properties:
          query:
            type: array
            items:
              $ref: '#/MatchQueryRequestItem'
      examples:
        $ref: '#/MatchQueryRequestExamples'
MatchQueryRequestItem:
  type: object
  required:
    - first
    - last
    - dob
    - ssn
  properties:
    first:
      type: string
      description: "PII record's first name"
    middle:
      type: string
      description: "PII record's middle name"
    last:
      type: string
      description: "PII record's last name"
    ssn:
      type: string
      description: "PII record's social security number"
      pattern: '^\d{3}-\d{2}-\d{4}$'
    dob:
      type: string
      format: "date"
      description: "PII record's date of birth"
MatchQueryRequestExamples:
  "All fields":
    description: "A request with values for all fields"
    value:
      query:
        - first: "string"
          middle: "string"
          last: "string"
          ssn: "000-00-0000"
          dob: "1970-01-01"
  "Only requried fields":
    description: "A request with values only for required fields"
    value:
      query:
        - first: "string"
          last: "string"
          ssn: "000-00-0000"
          dob: "1970-01-01"
  "Multiple Records":
    description: "A request with multiple records"
    value:
      query:
        - first: "string"
          last: "string"
          ssn: "000-00-0000"
          dob: "1970-01-01"
        - first: "string"
          last: "string"
          ssn: "000-00-0001"
          dob: "1970-01-02"

#/components/schemas/MatchQueryResponse
MatchQueryResponse:
  type: object
  required:
    - data
  properties:
    data:
      type: array
      $ref: '#/MatchQueryResponseItem'
      description: Array of match query response items. For every match query item provided in the request, a match response item is returned, even if no matches are found.

MatchQueryResponseItem:
  type: object
  required:
    - index
  properties:
    index:
      type: integer
      description: The index of the request item that the response item corresponds to, starting from 0. Index is derived from the implicit order of match query request items provided in the request.
    lookup_id:
      type: string
      nullable: true
      description: "The identifier of the match request item, if a match is present. This ID can be used for looking up the PII of the original match request item."
    matches:
      type: array
      items:
        $ref: './pii-record.yaml#/PiiRecord'

MatchQueryResponseExamples:
  Single:
    description: "A query returning a single match"
    value:
      data:
        - index: 0
          lookup_id: "string"
          matches:
            - $ref: './pii-record.yaml#/PiiRecordExamples/All'
  None:
    description: "A query returning no matches"
    value:
      data:
        - index: 0
          lookup_id: null
          matches: []
  Multiple:
    description: "A query returning multiple matches for one record"
    value:
      data:
        - index: 0
          lookup_id: "string"
          matches:
            - $ref: './pii-record.yaml#/PiiRecordExamples/AllEB'
            - $ref: './pii-record.yaml#/PiiRecordExamples/Required'
  MultipleRecords:
    description: "A query returning one match for multiple records"
    value:
      data:
        - index: 0
          lookup_id: "string"
          matches:
            - $ref: './pii-record.yaml#/PiiRecordExamples/Required'
        - index: 1
          lookup_id: "string"
          matches:
            - $ref: './pii-record.yaml#/PiiRecordExamples/Required'
